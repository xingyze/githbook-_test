# FTP存图

## 用途说明

> FTP 协议用于进行文件传输，不可以传输信息，只能传输图片，文本文档等文件格式的信息； 
>
> FTP 存图一般用于产线正常生产过程中，保存物品的图片用于问题分析和后续追踪记录，这种方 式只能保存 JPG 格式的图片，且实时性不高；
>
> 使用前需要先建立 FTP 服务器，如果客户有 FTP 服 务器，则可直接进行设置，如果没有，则需要在工控机上使用第三方软件建立服务器
>
> 现在我们演示使用第三方软件建立服务器进行存图的方式；

## windows电脑搭建FTP服务器环境

1、使用 _Quick_ _Easy_ _FTP_ _Server 这个工具_

配置服务器的 IP 和端口， IP 需要跟相机在一个网段，一般配 置为连接相机的网卡 IP

如果需要开机自动运行 FTP 服务器，则开启自动运行，最后一定要保存 更改，每次有更改后都要点击保存，否则不生效；

![](<../.gitbook/assets/image (38).png>)

2、设置登录FTP的账号、密码，用于分配给相机

打开用户账户管理，配置用户名称， 密码，以及图片保存在本地的路径，

同时需要勾选用户的权限，尽量全部勾选，不勾选会存在无 法上传文件的情况，

配置完毕后一定要点击保存更改； 配置完成点击左上角开启服务器；

![](<../.gitbook/assets/image (39).png>)

## 读码器配置

Normal 模式下，通信协议选择 FTP 模式， 

FTP 协议使能打开，填入配置好的 FTP 服务器，端口，用户名

![](<../.gitbook/assets/image (40).png>)

![](<../.gitbook/assets/image (41).png>)

参数说明如下： 

输出重传使能：打开后传输失败的图片可以进行二次重新传输； 

FTP 传输条件：可以选择 ALL（全部传输） ， ReadBarcode（读到码传输）， NoReadBarcode（未 读到码传输）； 

FTP 传输结果：可选择传输图片还是结果，或者都传输（结果是一次触发生成一个 txt 文档） 

FTP 命名：包含默认名，分隔符，编号，序号，名称等 

图片名字举例： 如设置 Default Name 为 JPG，分隔符为-，勾选包裹编号（当前包裹号为 3）， 时间戳 类型设置为 YYYYMMDD_HHMMSSFF（年月日时分秒毫秒），则图片命名为 JPG-3- 20170724\_20454244.jpg，文档命名为 JPG-3-3-20170724\_20454244.txt；

## 查看状态

以上已完成 FTP 服务器及相机存图设置，开启 FTP 服务器，触发相机，

查看是否正常存图； 查看 FTP 服务器是否在线

![](<../.gitbook/assets/image (42).png>)
